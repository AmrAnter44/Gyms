"use strict";(()=>{var e={};e.id=8909,e.ids=[8909],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},70779:(e,a,t)=>{t.r(a),t.d(a,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>w,staticGenerationAsyncStorage:()=>l});var r={};t.r(r),t.d(r,{POST:()=>u});var s=t(49303),n=t(88716),i=t(60670),o=t(87070),p=t(72331),c=t(98691);async function u(e){try{if(await p._.user.count()>0)return o.NextResponse.json({error:"يوجد مستخدمين بالفعل في النظام"},{status:400});let e={name:"Admin",email:"admin@gym.com",password:"admin123456"},a=await c.ZP.hash(e.password,10),t=await p._.user.create({data:{name:e.name,email:e.email,password:a,role:"ADMIN",isActive:!0}});return await p._.permission.create({data:{userId:t.id,canViewMembers:!0,canCreateMembers:!0,canEditMembers:!0,canDeleteMembers:!0,canViewPT:!0,canCreatePT:!0,canEditPT:!0,canDeletePT:!0,canViewStaff:!0,canCreateStaff:!0,canEditStaff:!0,canDeleteStaff:!0,canViewReceipts:!0,canEditReceipts:!0,canDeleteReceipts:!0,canViewReports:!0,canViewFinancials:!0,canAccessSettings:!0}}),o.NextResponse.json({success:!0,message:"تم إنشاء حساب الأدمن بنجاح",credentials:{email:e.email,password:e.password}})}catch(e){return console.error("Setup error:",e),o.NextResponse.json({error:"فشل إنشاء حساب الأدمن"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/setup/route",pathname:"/api/admin/setup",filename:"route",bundlePath:"app/api/admin/setup/route"},resolvedPagePath:"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\api\\admin\\setup\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:l,serverHooks:w}=d,f="/api/admin/setup/route";function g(){return(0,i.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:l})}},72331:(e,a,t)=>{t.d(a,{_:()=>s});var r=t(53524);let s=globalThis.prisma??new r.PrismaClient}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[8948,5972,8691],()=>t(70779));module.exports=r})();