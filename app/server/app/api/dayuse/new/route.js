"use strict";(()=>{var e={};e.id=1954,e.ids=[1954],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32518:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>w,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{POST:()=>p});var n=r(49303),s=r(88716),i=r(60670),o=r(87070);let u=new(r(53524)).PrismaClient;async function p(e){try{let{name:t,phone:r,serviceType:a,price:n,staffName:s,paymentMethod:i="cash"}=await e.json(),p=(await u.receiptCounter.upsert({where:{id:1},update:{current:{increment:1}},create:{id:1,current:1001}})).current,d=await u.dayUseInBody.create({data:{name:t,phone:r,serviceType:a,price:n,staffName:s}});return await u.receipt.create({data:{receiptNumber:p,type:"DayUse",amount:n,itemDetails:`${a} - ${t}`,paymentMethod:i,dayUseId:d.id}}),o.NextResponse.json({success:!0,newDayUse:d,receiptNumber:p})}catch(e){return console.error("âŒ Error creating DayUse and receipt:",e),o.NextResponse.json({success:!1,error:String(e)},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/dayuse/new/route",pathname:"/api/dayuse/new",filename:"route",bundlePath:"app/api/dayuse/new/route"},resolvedPagePath:"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\api\\dayuse\\new\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:l}=d,y="/api/dayuse/new/route";function w(){return(0,i.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972],()=>r(32518));module.exports=a})();