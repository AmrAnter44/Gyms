(()=>{var e={};e.id=2245,e.ids=[2245],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},82458:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(34102),a(84658),a(35866);var s=a(23191),r=a(88716),l=a(37922),n=a.n(l),i=a(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let o=["",{children:["dayuse",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,34102)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\dayuse\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,84658)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\dayuse\\page.tsx"],p="/dayuse/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dayuse/page",pathname:"/dayuse",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},40121:(e,t,a)=>{Promise.resolve().then(a.bind(a,36224))},36224:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(10326),r=a(17577),l=a(79330),n=a(33971);function i(){let[e,t]=(0,r.useState)([]),[a,i]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!0),[c,p]=(0,r.useState)(""),[m,x]=(0,r.useState)({name:"",phone:"",serviceType:"DayUse",price:0,staffName:"",paymentMethod:"cash"}),[u,h]=(0,r.useState)(!1),[y,g]=(0,r.useState)(null),b=async()=>{try{let e=await fetch("/api/dayuse"),a=await e.json();t(a)}catch(e){console.error("Error:",e)}finally{o(!1)}},j=async e=>{e.preventDefault(),o(!0),p("");try{let e=await fetch("/api/dayuse",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(e.ok){let t=await e.json();try{let e=await fetch(`/api/receipts?dayUseId=${t.id}`),a=await e.json();if(a.length>0){let e=a[0];g({receiptNumber:e.receiptNumber,type:e.type,amount:e.amount,details:JSON.parse(e.itemDetails),date:new Date(e.createdAt),paymentMethod:m.paymentMethod}),h(!0)}}catch(e){console.error("Error fetching receipt:",e)}x({name:"",phone:"",serviceType:"DayUse",price:0,staffName:"",paymentMethod:"cash"}),p("✅ تم التسجيل بنجاح!"),setTimeout(()=>p(""),3e3),b(),i(!1)}else p("❌ فشل التسجيل")}catch(e){console.error(e),p("❌ حدث خطأ")}finally{o(!1)}};return(0,s.jsxs)("div",{className:"container mx-auto p-6",dir:"rtl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"يوم استخدام / InBody"}),s.jsx("button",{onClick:()=>i(!a),className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700",children:a?"إخفاء النموذج":"إضافة عملية جديدة"})]}),a&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"إضافة عملية جديدة"}),c&&s.jsx("div",{className:`mb-4 p-3 rounded-lg ${c.includes("✅")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"الاسم"}),s.jsx("input",{type:"text",required:!0,value:m.name,onChange:e=>x({...m,name:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"اسم الزائر"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"رقم الهاتف"}),s.jsx("input",{type:"tel",required:!0,value:m.phone,onChange:e=>x({...m,phone:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"01xxxxxxxxx"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"نوع الخدمة"}),(0,s.jsxs)("select",{value:m.serviceType,onChange:e=>x({...m,serviceType:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[s.jsx("option",{value:"DayUse",children:"يوم استخدام"}),s.jsx("option",{value:"InBody",children:"InBody"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"السعر"}),s.jsx("input",{type:"number",required:!0,min:"0",value:m.price,onChange:e=>x({...m,price:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"0.00"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"اسم الموظف"}),s.jsx("input",{type:"text",required:!0,value:m.staffName,onChange:e=>x({...m,staffName:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"اسم الموظف"})]})]}),s.jsx("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 border-2 border-green-200 rounded-xl p-5",children:s.jsx(n.ZP,{value:m.paymentMethod,onChange:e=>x({...m,paymentMethod:e}),required:!0})}),s.jsx("button",{type:"submit",disabled:d,className:"w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:d?"جاري الحفظ...":"إضافة"})]})]}),d?s.jsx("div",{className:"text-center py-12",children:"جاري التحميل..."}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-right",children:"الاسم"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"الهاتف"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"نوع الخدمة"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"السعر"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"الموظف"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"التاريخ"})]})}),s.jsx("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3",children:e.name}),s.jsx("td",{className:"px-4 py-3",children:e.phone}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-1 rounded text-sm ${"DayUse"===e.serviceType?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:"DayUse"===e.serviceType?"يوم استخدام":"InBody"})}),(0,s.jsxs)("td",{className:"px-4 py-3",children:[e.price," ج.م"]}),s.jsx("td",{className:"px-4 py-3",children:e.staffName}),s.jsx("td",{className:"px-4 py-3",children:new Date(e.createdAt).toLocaleDateString("ar-EG")})]},e.id))})]}),0===e.length&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:"لا توجد عمليات حالياً"})]}),y&&s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>h(!0),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",children:"\uD83D\uDDA8️ طباعة آخر إيصال"})}),u&&y&&s.jsx(l.e,{receiptNumber:y.receiptNumber,type:y.type,amount:y.amount,details:y.details,date:y.date,paymentMethod:y.paymentMethod,onClose:()=>h(!1)})]})}},34102:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(68570).createProxy)(String.raw`C:\Users\amran\Desktop\gym\gym-management\app\dayuse\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,9206,6621,9797,2251],()=>a(82458));module.exports=s})();