(()=>{var e={};e.id=2686,e.ids=[2686],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},3307:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),t(26939),t(84658),t(35866);var a=t(23191),r=t(88716),n=t(37922),l=t.n(n),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["receipts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,26939)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\receipts\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,84658)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\receipts\\page.tsx"],m="/receipts/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/receipts/page",pathname:"/receipts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6651:(e,s,t)=>{Promise.resolve().then(t.bind(t,76995))},76995:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(10326),r=t(17577),n=t(35047);function l({message:e="Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©",showBackButton:s=!0}){let t=(0,n.useRouter)();return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50",dir:"rtl",children:(0,a.jsxs)("div",{className:"max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 text-center",children:[a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-red-100 rounded-full",children:a.jsx("svg",{className:"w-12 h-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"\uD83D\uDEAB Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ø±ÙÙˆØ¶"}),a.jsx("p",{className:"text-lg text-gray-600 mb-8",children:e}),a.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4 mb-6",children:a.jsx("p",{className:"text-sm text-red-800",children:"Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ù‡Ø°Ø§ Ø®Ø·Ø£ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©."})}),(0,a.jsxs)("div",{className:"space-y-3",children:[s&&a.jsx("button",{onClick:()=>t.back(),className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 transition font-bold shadow-lg",children:"â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø®Ù„Ù"}),a.jsx("button",{onClick:()=>t.push("/"),className:"w-full bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition font-bold",children:"\uD83C\uDFE0 Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})]}),a.jsx("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCA1 ",a.jsx("strong",{children:"Ù†ØµÙŠØ­Ø©:"})," ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø­Ø³Ø§Ø¨ ÙŠÙ…Ù„Ùƒ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"]})})]})})}function i({receipt:e,onDetailsClick:s}){let[t,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)(""),[d,o]=(0,r.useState)(!1),c=JSON.parse(e.itemDetails),m=e=>`Ø¥ÙŠØµØ§Ù„ #${e.receiptNumber}
Ø§Ù„Ø¹Ù…ÙŠÙ„: ${e.memberName}
Ø§Ù„Ù…Ø¨Ù„Øº: ${e.amount} Ø¬.Ù…
Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${e.paymentMethod}
ØªØ§Ø±ÙŠØ®: ${e.date}`,x=async()=>{if(!l||l.trim().length<10){alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ­ÙŠØ­");return}o(!0);let s=m({receiptNumber:e.receiptNumber,type:e.type,amount:e.amount,memberName:c.memberName||c.clientName||c.name,memberNumber:c.memberNumber,date:e.createdAt,paymentMethod:e.paymentMethod,details:c});try{let e=await fetch("/api/send-receipt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:l,message:s})});(await e.json()).success?(alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"),n(!1),i("")):alert("âŒ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„")}catch(e){console.error(e),alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„")}finally{o(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[s&&a.jsx("button",{onClick:s,className:"bg-blue-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-700 flex items-center gap-1",children:"\uD83D\uDC41ï¸"}),(c.phone||c.memberPhone||c.clientPhone)&&a.jsx("button",{onClick:()=>{let e=c.phone||c.memberPhone||c.clientPhone;if(!e){alert("âš ï¸ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± Ù…ØªÙˆÙØ± ÙÙŠ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥ÙŠØµØ§Ù„");return}i(e),n(!0)},className:"bg-green-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-green-700 flex items-center gap-1",children:"\uD83D\uDCF2"}),a.jsx("button",{onClick:()=>n(!0),className:"bg-purple-600 text-white px-3 py-2 rounded-lg text-sm hover:bg-purple-700 flex items-center gap-1",children:"\uD83D\uDCF1"})]}),t&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&(n(!1),i(""))},children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-4xl",children:"\uD83D\uDCF1"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-2xl font-bold",children:"Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥ÙŠØµØ§Ù„"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Ø¥ÙŠØµØ§Ù„ #",e.receiptNumber]})]})]}),a.jsx("button",{onClick:()=>{n(!1),i("")},className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"\uD83D\uDCDE Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *"}),a.jsx("input",{type:"tel",value:l,onChange:e=>i(e.target.value),placeholder:"01xxxxxxxxx",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 font-mono text-lg",dir:"ltr",autoFocus:!0})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x,disabled:d||!l||l.trim().length<10,className:"flex-1 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 disabled:bg-gray-400 flex items-center justify-center gap-2",children:d?a.jsx(a.Fragment,{children:"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."}):a.jsx(a.Fragment,{children:"\uD83D\uDCF2 Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨"})}),a.jsx("button",{onClick:()=>{n(!1),i("")},disabled:d,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})})]})}var d=t(36977);function o({receipt:e,onClose:s}){var t;let r=JSON.parse(e.itemDetails);return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:s,children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-2xl w-full shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:`bg-gradient-to-r ${{Member:"from-blue-500 to-blue-600",PT:"from-green-500 to-green-600",DayUse:"from-purple-500 to-purple-600",InBody:"from-orange-500 to-orange-600"}[e.type]||"from-gray-500 to-gray-600"} text-white p-6 rounded-t-2xl`,children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥ÙŠØµØ§Ù„"}),a.jsx("p",{className:"text-sm opacity-90",children:{Member:"Ø§Ø´ØªØ±Ø§Ùƒ Ø¹Ø¶ÙˆÙŠØ©",PT:"ØªØ¯Ø±ÙŠØ¨ Ø´Ø®ØµÙŠ",DayUse:"ÙŠÙˆÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…",InBody:"ÙØ­Øµ InBody"}[t=e.type]||t})]}),a.jsx("button",{onClick:s,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full w-10 h-10 flex items-center justify-center transition text-2xl",children:"\xd7"})]}),a.jsx("div",{className:"bg-white bg-opacity-20 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„"}),(0,a.jsxs)("p",{className:"text-3xl font-bold",children:["#",e.receiptNumber]})]}),a.jsx("div",{className:"text-6xl",children:"\uD83E\uDDFE"})]})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[r.memberNumber&&a.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-blue-600 mb-1",children:"Ø±Ù‚Ù… Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:["#",r.memberNumber]})]}),a.jsx("div",{className:"text-5xl",children:"\uD83D\uDC64"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.memberName&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ"}),a.jsx("p",{className:"text-lg font-bold text-gray-800",children:r.memberName})]}),r.clientName&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„"}),a.jsx("p",{className:"text-lg font-bold text-gray-800",children:r.clientName})]}),r.name&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Ø§Ù„Ø§Ø³Ù…"}),a.jsx("p",{className:"text-lg font-bold text-gray-800",children:r.name})]})]}),(0,a.jsxs)("div",{className:"border-t-2 pt-4",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDCCB"}),a.jsx("span",{children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø©"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[r.subscriptionPrice&&(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ø³Ø¹Ø± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ"}),(0,a.jsxs)("span",{className:"font-bold",children:[r.subscriptionPrice," Ø¬.Ù…"]})]}),r.sessionsPurchased&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª"}),(0,a.jsxs)("span",{className:"font-bold",children:[r.sessionsPurchased," Ø¬Ù„Ø³Ø©"]})]}),r.pricePerSession&&(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ø³Ø¹Ø± Ø§Ù„Ø¬Ù„Ø³Ø©"}),(0,a.jsxs)("span",{className:"font-bold",children:[r.pricePerSession," Ø¬.Ù…"]})]})]}),r.coachName&&(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø¨"}),a.jsx("span",{className:"font-bold",children:r.coachName})]}),r.staffName&&(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù"}),a.jsx("span",{className:"font-bold",children:r.staffName})]}),r.serviceType&&(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©"}),a.jsx("span",{className:"font-bold",children:"DayUse"===r.serviceType?"ÙŠÙˆÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…":"InBody"})]})]})]}),(0,a.jsxs)("div",{className:"border-t-2 pt-4",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDCB0"}),a.jsx("span",{children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙØ¹"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[void 0!==r.paidAmount&&(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹"}),(0,a.jsxs)("span",{className:"font-bold text-green-600",children:[r.paidAmount," Ø¬.Ù…"]})]}),void 0!==r.remainingAmount&&r.remainingAmount>0&&(0,a.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ"}),(0,a.jsxs)("span",{className:"font-bold text-red-600",children:[r.remainingAmount," Ø¬.Ù…"]})]}),(0,a.jsxs)("div",{className:"flex justify-between py-3 bg-green-50 px-3 rounded-lg mt-2",children:[a.jsx("span",{className:"font-bold text-gray-800",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ"}),(0,a.jsxs)("span",{className:"font-bold text-2xl text-green-600",children:[e.amount," Ø¬.Ù…"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥ØµØ¯Ø§Ø±"}),a.jsx("p",{className:"text-lg font-bold text-gray-800",children:new Date(e.createdAt).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsxs)("div",{className:"p-6 bg-gray-50 rounded-b-2xl flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{(0,d.p)(e.receiptNumber,e.type,e.amount,r,e.createdAt)},className:"flex-1 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition font-medium shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDDA8ï¸"}),a.jsx("span",{children:"Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„"})]}),a.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition font-medium",children:"Ø¥ØºÙ„Ø§Ù‚"})]})]})})}function c(){let e=(0,n.useRouter)(),{hasPermission:s,loading:t,user:c}=function(){let[e,s]=(0,r.useState)({user:null,permissions:null,loading:!0,isAdmin:!1}),t=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();s({user:t.user,permissions:t.user.permissions||null,loading:!1,isAdmin:"ADMIN"===t.user.role})}else s({user:null,permissions:null,loading:!1,isAdmin:!1})}catch(e){console.error("Error fetching permissions:",e),s({user:null,permissions:null,loading:!1,isAdmin:!1})}},a=s=>!!e.isAdmin||!!e.permissions&&e.permissions[s];return{...e,hasPermission:a,hasAnyPermission:s=>!!e.isAdmin||s.some(e=>a(e)),hasAllPermissions:s=>!!e.isAdmin||s.every(e=>a(e)),refreshPermissions:t}}(),[m,x]=(0,r.useState)([]),[p,u]=(0,r.useState)([]),[h,g]=(0,r.useState)(!0),[b,f]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,v]=(0,r.useState)("all"),[D,w]=(0,r.useState)("all"),[C,$]=(0,r.useState)(null),[k,P]=(0,r.useState)(null),[A,S]=(0,r.useState)(!1),[T,E]=(0,r.useState)({receiptNumber:0,amount:0,paymentMethod:"cash",staffName:""}),B=s("canEditReceipts"),M=s("canDeleteReceipts"),z=async()=>{try{let s=await fetch("/api/receipts");if(401===s.status){f("âŒ ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹"),setTimeout(()=>e.push("/login"),2e3);return}if(403===s.status){f("âŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"),x([]),u([]);return}if(s.ok){let e=await s.json();Array.isArray(e)?(x(e),u(e)):(console.error("Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù„ÙŠØ³Øª array:",e),x([]),u([]))}else{let e=await s.json();f(`âŒ ${e.error||"ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"}`),x([]),u([])}}catch(e){console.error("Error fetching receipts:",e),f("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¬Ù„Ø¨ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"),x([]),u([])}finally{g(!1)}};if(t)return(0,a.jsxs)("div",{className:"container mx-auto p-6 text-center",dir:"rtl",children:[a.jsx("div",{className:"text-6xl mb-4",children:"â³"}),a.jsx("p",{className:"text-xl",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]});if(!s("canViewReceipts"))return a.jsx(l,{message:"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø¹Ø±Ø¶ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"});let F=e=>({Member:"\uD83C\uDD95 Ø¹Ø¶Ùˆ Ø¬Ø¯ÙŠØ¯","ØªØ¬Ø¯ÙŠØ¯ Ø¹Ø¶ÙˆÙŠÙ‡":"\uD83D\uDD04 ØªØ¬Ø¯ÙŠØ¯ Ø¹Ø¶ÙˆÙŠØ©","Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ø±Ø§ÙŠÙØª":"\uD83D\uDCAA PT Ø¬Ø¯ÙŠØ¯","ØªØ¬Ø¯ÙŠØ¯ Ø¨Ø±Ø§ÙŠÙØª":"\uD83D\uDD04 ØªØ¬Ø¯ÙŠØ¯ PT",PT:"\uD83D\uDCAA PT",DayUse:"\uD83D\uDCC5 Day Use",Payment:"\uD83D\uDCB0 Ø¯ÙØ¹ Ù…ØªØ¨Ù‚ÙŠ",InBody:"âš–ï¸ InBody"})[e]||e,_=e=>({cash:"\uD83D\uDCB5 ÙƒØ§Ø´",visa:"\uD83D\uDCB3 ÙÙŠØ²Ø§",vodafone_cash:"\uD83D\uDCF1 ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´",instapay:"\uD83D\uDCB8 Ø¥Ù†Ø³ØªØ§Ø¨Ø§ÙŠ"})[e]||e,I=async e=>{if(!M){f("âŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø­Ø°Ù Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"),setTimeout(()=>f(""),3e3);return}if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¥ÙŠØµØ§Ù„ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!")){try{let s=await fetch(`/api/receipts/update?id=${e}`,{method:"DELETE"});if(s.ok)f("âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­"),z();else{let e=await s.json();f(`âŒ ${e.error||"ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ø¥ÙŠØµØ§Ù„"}`)}}catch(e){console.error("Error:",e),f("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­Ø°Ù")}setTimeout(()=>f(""),3e3)}},U=e=>{if(!B){f("âŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"),setTimeout(()=>f(""),3e3);return}P(e),E({receiptNumber:e.receiptNumber,amount:e.amount,paymentMethod:e.paymentMethod,staffName:e.staffName||""}),S(!0)},R=async()=>{if(k){try{let e=await fetch("/api/receipts/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({receiptId:k.id,receiptNumber:T.receiptNumber,amount:T.amount,paymentMethod:T.paymentMethod,staffName:T.staffName})});if(e.ok)f("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­"),S(!1),P(null),z();else{let s=await e.json();f(`âŒ ${s.error||"ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥ÙŠØµØ§Ù„"}`)}}catch(e){console.error("Error:",e),f("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«")}setTimeout(()=>f(""),3e3)}},G=e=>{try{let s=JSON.parse(e.itemDetails);(0,d.p)(e.receiptNumber,e.type,e.amount,s,e.createdAt,e.paymentMethod)}catch(e){console.error("Error printing receipt:",e),alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©")}};return h?(0,a.jsxs)("div",{className:"container mx-auto p-6 text-center",dir:"rtl",children:[a.jsx("div",{className:"text-6xl mb-4",children:"â³"}),a.jsx("p",{className:"text-xl",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}):(0,a.jsxs)("div",{className:"container mx-auto p-6",dir:"rtl",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"\uD83E\uDDFE Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"}),a.jsx("p",{className:"text-gray-600",children:"Ø¹Ø±Ø¶ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"}),c&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["\uD83D\uDC64 ",c.name," - ","ADMIN"===c.role?"\uD83D\uDC51 Ù…Ø¯ÙŠØ±":"MANAGER"===c.role?"\uD83D\uDCCA Ù…Ø´Ø±Ù":"\uD83D\uDC77 Ù…ÙˆØ¸Ù"]})]})}),b&&a.jsx("div",{className:`mb-6 p-4 rounded-lg ${b.includes("âœ…")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-xl shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-3xl font-bold",children:p.length}),a.jsx("div",{className:"text-sm opacity-90",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØµØ§Ù„Ø§Øª"})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"\uD83D\uDCCA"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-xl shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-3xl font-bold",children:(Array.isArray(p)?p.reduce((e,s)=>e+s.amount,0):0).toLocaleString()}),a.jsx("div",{className:"text-sm opacity-90",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø¬.Ù…)"})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"\uD83D\uDCB0"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-6 rounded-xl shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-3xl font-bold",children:(()=>{if(!Array.isArray(p))return 0;let e=new Date().toDateString();return p.filter(s=>new Date(s.createdAt).toDateString()===e).length})()}),a.jsx("div",{className:"text-sm opacity-90",children:"Ø¥ÙŠØµØ§Ù„Ø§Øª Ø§Ù„ÙŠÙˆÙ…"})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"\uD83D\uDCC5"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-xl shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-3xl font-bold",children:(()=>{if(!Array.isArray(p))return 0;let e=new Date().toDateString();return p.filter(s=>new Date(s.createdAt).toDateString()===e).reduce((e,s)=>e+s.amount,0)})().toLocaleString()}),a.jsx("div",{className:"text-sm opacity-90",children:"Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ… (Ø¬.Ù…)"})]}),a.jsx("div",{className:"text-5xl opacity-20",children:"\uD83D\uDCB5"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"\uD83D\uDD0D Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„Ø§ØªØ±"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"\uD83D\uDD0D Ø¨Ø­Ø«"}),a.jsx("input",{type:"text",value:j,onChange:e=>y(e.target.value),placeholder:"Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„ØŒ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ØŒ Ø§Ù„Ù‡Ø§ØªÙØŒ Ø§Ù„Ù…ÙˆØ¸Ù...",className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"\uD83D\uDCCB Ù†ÙˆØ¹ Ø§Ù„Ø¥ÙŠØµØ§Ù„"}),(0,a.jsxs)("select",{value:N,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Ø§Ù„ÙƒÙ„"}),a.jsx("option",{value:"Member",children:"Ø¹Ø¶Ùˆ Ø¬Ø¯ÙŠØ¯"}),a.jsx("option",{value:"ØªØ¬Ø¯ÙŠØ¯ Ø¹Ø¶ÙˆÙŠÙ‡",children:"ØªØ¬Ø¯ÙŠØ¯ Ø¹Ø¶ÙˆÙŠØ©"}),a.jsx("option",{value:"Ø§Ø´ØªØ±Ø§Ùƒ Ø¨Ø±Ø§ÙŠÙØª",children:"PT Ø¬Ø¯ÙŠØ¯"}),a.jsx("option",{value:"ØªØ¬Ø¯ÙŠØ¯ Ø¨Ø±Ø§ÙŠÙØª",children:"ØªØ¬Ø¯ÙŠØ¯ PT"}),a.jsx("option",{value:"DayUse",children:"Day Use"}),a.jsx("option",{value:"InBody",children:"InBody"}),a.jsx("option",{value:"Payment",children:"Ø¯ÙØ¹ Ù…ØªØ¨Ù‚ÙŠ"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"\uD83D\uDCB3 Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),(0,a.jsxs)("select",{value:D,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 border-2 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Ø§Ù„ÙƒÙ„"}),a.jsx("option",{value:"cash",children:"ÙƒØ§Ø´"}),a.jsx("option",{value:"visa",children:"ÙÙŠØ²Ø§"}),a.jsx("option",{value:"vodafone_cash",children:"ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´"}),a.jsx("option",{value:"instapay",children:"Ø¥Ù†Ø³ØªØ§Ø¨Ø§ÙŠ"})]})]})]}),(j||"all"!==N||"all"!==D)&&a.jsx("button",{onClick:()=>{y(""),v("all"),w("all")},className:"mt-4 text-sm text-blue-600 hover:text-blue-700 font-medium",children:"âŒ Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-gray-100 to-gray-200",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„"}),a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø§Ù„Ù†ÙˆØ¹"}),a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø§Ù„Ø¹Ù…ÙŠÙ„"}),a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø§Ù„Ù…Ø¨Ù„Øº"}),a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹"}),a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø§Ù„Ù…ÙˆØ¸Ù"}),a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),a.jsx("th",{className:"px-6 py-4 text-right font-bold",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),a.jsx("tbody",{children:p.map(e=>{let s={};try{s=JSON.parse(e.itemDetails)}catch{}let t=s.memberName||s.clientName||s.name||"-";return(0,a.jsxs)("tr",{className:"border-t hover:bg-blue-50 transition",children:[a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"font-bold text-blue-600",children:["#",e.receiptNumber]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800",children:F(e.type)})}),a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:t}),s.phone&&a.jsx("p",{className:"text-xs text-gray-600",children:s.phone}),s.memberNumber&&(0,a.jsxs)("p",{className:"text-xs text-blue-600",children:["Ø¹Ø¶ÙˆÙŠØ© #",s.memberNumber]}),s.ptNumber&&(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["PT #",s.ptNumber]})]})}),a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("span",{className:"font-bold text-green-600",children:[e.amount.toLocaleString()," Ø¬.Ù…"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm",children:_(e.paymentMethod)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm text-gray-600",children:e.staffName||"-"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(e.createdAt).toLocaleString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),a.jsx("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(i,{receipt:e,onDetailsClick:()=>$(e)}),a.jsx("button",{onClick:()=>G(e),className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 text-sm transition shadow-md hover:shadow-lg",title:"Ø·Ø¨Ø§Ø¹Ø©",children:"\uD83D\uDDA8ï¸"}),B&&a.jsx("button",{onClick:()=>U(e),className:"bg-orange-600 text-white px-3 py-2 rounded-lg hover:bg-orange-700 text-sm transition shadow-md hover:shadow-lg",title:"ØªØ¹Ø¯ÙŠÙ„",children:"âœï¸"}),M&&a.jsx("button",{onClick:()=>I(e.id),className:"bg-red-600 text-white px-3 py-2 rounded-lg hover:bg-red-700 text-sm transition shadow-md hover:shadow-lg",title:"Ø­Ø°Ù",children:"\uD83D\uDDD1ï¸"})]})})]},e.id)})})]})}),0===p.length&&!h&&(0,a.jsxs)("div",{className:"text-center py-20 text-gray-500",children:[a.jsx("div",{className:"text-6xl mb-4",children:"\uD83E\uDDFE"}),a.jsx("p",{className:"text-xl font-medium mb-2",children:j||"all"!==N||"all"!==D?"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«":"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥ÙŠØµØ§Ù„Ø§Øª"}),(j||"all"!==N||"all"!==D)&&a.jsx("button",{onClick:()=>{y(""),v("all"),w("all")},className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±"})]})]}),C&&a.jsx(o,{receipt:C,onClose:()=>$(null)}),A&&k&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"âœï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥ÙŠØµØ§Ù„"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Ø¥ÙŠØµØ§Ù„ Ø±Ù‚Ù… #",k.receiptNumber]})]}),a.jsx("button",{onClick:()=>{S(!1),P(null)},className:"text-gray-400 hover:text-gray-600 text-3xl leading-none",children:"\xd7"})]}),a.jsx("div",{className:"bg-blue-50 border-r-4 border-blue-500 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Ø§Ù„Ù†ÙˆØ¹:"}),a.jsx("span",{className:"font-bold mr-2",children:F(k.type)})]}),(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®:"}),a.jsx("span",{className:"font-bold mr-2",children:new Date(k.createdAt).toLocaleDateString("ar-EG")})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold mb-2",children:["Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„ ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:T.receiptNumber,onChange:e=>E({...T,receiptNumber:parseInt(e.target.value)}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"1000"}),a.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"âš ï¸ ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold mb-2",children:["Ø§Ù„Ù…Ø¨Ù„Øº (Ø¬.Ù…) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",value:T.amount,onChange:e=>E({...T,amount:parseFloat(e.target.value)}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold mb-2",children:["Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ ",a.jsx("span",{className:"text-red-600",children:"*"})]}),(0,a.jsxs)("select",{value:T.paymentMethod,onChange:e=>E({...T,paymentMethod:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"cash",children:"\uD83D\uDCB5 ÙƒØ§Ø´"}),a.jsx("option",{value:"visa",children:"\uD83D\uDCB3 ÙÙŠØ²Ø§"}),a.jsx("option",{value:"vodafone_cash",children:"\uD83D\uDCF1 ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´"}),a.jsx("option",{value:"instapay",children:"\uD83D\uDCB8 Ø¥Ù†Ø³ØªØ§Ø¨Ø§ÙŠ"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-bold mb-2",children:"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),a.jsx("input",{type:"text",value:T.staffName,onChange:e=>E({...T,staffName:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„"})]}),a.jsx("div",{className:"bg-yellow-50 border-r-4 border-yellow-500 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"text-2xl",children:"âš ï¸"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-bold text-yellow-800 mb-1",children:"ØªÙ†Ø¨ÙŠÙ‡ Ù‡Ø§Ù…"}),a.jsx("p",{className:"text-sm text-yellow-700",children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥ÙŠØµØ§Ù„ Ø³ÙŠØ¤Ø«Ø± ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…. Ù„Ù† ÙŠØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø£Ùˆ Ø¬Ù„Ø³Ø§Øª PT."})]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:R,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition font-bold shadow-lg hover:shadow-xl",children:"âœ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"}),a.jsx("button",{onClick:()=>{S(!1),P(null)},className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition font-bold",children:"Ø¥Ù„ØºØ§Ø¡"})]})]})})]})}},36977:(e,s,t)=>{"use strict";function a(e){if(!e)return"-";let s="string"==typeof e?new Date(e):e,t=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${t}-${a}-${r}`}function r(e,s,t,r,n,l){let i=n instanceof Date?n:new Date(n);!function(e){let s=function(e){let{receiptNumber:s,type:t,amount:r,details:n,date:l}=e,i=l.toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=t.includes("ØªØ¬Ø¯ÙŠØ¯")||!0===n.isRenewal,o={cash:"ÙƒØ§Ø´ \uD83D\uDCB5",visa:"ÙÙŠØ²Ø§ \uD83D\uDCB3",instapay:"Ø¥Ù†Ø³ØªØ§ Ø¨Ø§ÙŠ \uD83D\uDCF1",wallet:"Ù…Ø­ÙØ¸Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© \uD83D\uDCB0"}[n.paymentMethod||"cash"]||"ÙƒØ§Ø´ \uD83D\uDCB5",c=n.staffName||"";return`
<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=80mm">
  <title>Ø¥ÙŠØµØ§Ù„ ${s}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    @page {
      size: 80mm auto;
      margin: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      width: 80mm;
      padding: 8mm;
      background: white;
      color: #000;
      font-size: 13px;
      line-height: 1.4;
    }
    
    .header {
      text-align: center;
      border-bottom: 2px dashed #000;
      padding-bottom: 12px;
      margin-bottom: 15px;
    }
    
    .header h1 {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 6px;
    }
    
    .header p {
      font-size: 12px;
      margin: 3px 0;
      color: #333;
    }
    
    .type-badge {
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: bold;
      display: inline-block;
      margin: 8px 0;
      color: white;
    }
    
    .type-badge.renewal {
      background: #10b981;
    }
    
    .type-badge.new {
      background: #3b82f6;
    }
    
    .payment-method-badge {
      background: #6366f1;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: bold;
      display: inline-block;
      margin: 8px 0;
    }
    
    .staff-badge {
      background: #f59e0b;
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: bold;
      display: inline-block;
      margin: 8px 0;
    }
    
    .info-row {
      display: flex;
      justify-content: space-between;
      margin: 6px 0;
      font-size: 13px;
    }
    
    .info-row strong {
      font-weight: 600;
    }
    
    .details {
      border-top: 2px solid #000;
      border-bottom: 2px solid #000;
      padding: 12px 0;
      margin: 12px 0;
    }
    
    .details h3 {
      font-size: 15px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .detail-item {
      margin: 6px 0;
      font-size: 13px;
    }
    
    .detail-item strong {
      font-weight: 600;
      margin-left: 5px;
    }
    
    .member-number {
      font-size: 19px;
      font-weight: bold;
      color: #2563eb;
      text-align: center;
      margin: 12px 0;
      padding: 10px;
      background: #eff6ff;
      border-radius: 6px;
      border: 2px solid #2563eb;
    }
    
    .date-box {
      background: #f0f9ff;
      border: 2px solid #3b82f6;
      border-radius: 8px;
      padding: 10px;
      margin: 10px 0;
      font-family: 'Courier New', monospace;
    }
    
    .date-box p {
      margin: 4px 0;
      font-size: 12px;
    }
    
    .date-value {
      font-weight: bold;
      color: #1e40af;
    }
    
    .renewal-info {
      background: #d1fae5;
      border: 2px solid #10b981;
      border-radius: 8px;
      padding: 10px;
      margin: 10px 0;
    }
    
    .renewal-info p {
      margin: 4px 0;
      font-size: 12px;
    }
    
    .total {
      display: flex;
      justify-content: space-between;
      font-size: 17px;
      font-weight: bold;
      margin: 15px 0;
      padding: 12px 0;
      border-top: 3px solid #000;
    }
    
    .footer {
      text-align: center;
      margin-top: 15px;
      font-size: 12px;
      color: #555;
      border-top: 2px dashed #000;
      padding-top: 12px;
    }
    
    .footer p {
      margin: 4px 0;
    }
    
    .remaining {
      color: #dc2626;
      font-weight: bold;
    }
    
    @media print {
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div>
      <img src='icon.png' alt="logo" style="width: 24px; height: 24px; display: inline-block;"/>
       <img src='qr.png' alt="logo" style="width: 24px; height: 24px; display: inline-block;"/>
      <h1>X GYM</h1>
    </div>
    <p>Ø¥ÙŠØµØ§Ù„ Ø§Ø³ØªÙ„Ø§Ù…</p>
    <p>${t}</p>
    
    ${d?'<div class="type-badge renewal">\uD83D\uDD04 ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ</div>':'<div class="type-badge new">âœ¨ Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯</div>'}
    
    <div class="payment-method-badge">${o}</div>
    
    ${c?`<div class="staff-badge">ğŸ‘· ${c}</div>`:""}
  </div>

  <div class="info-row">
    <strong>Ø±Ù‚Ù… Ø§Ù„Ø¥ÙŠØµØ§Ù„:</strong>
    <span>#${s}</span>
  </div>
  <div class="info-row">
    <strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong>
    <span>${i}</span>
  </div>

  <div class="details">
    <h3>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</h3>
    
    ${n.memberNumber?`
      <div class="member-number">
        Ø±Ù‚Ù… Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©: ${n.memberNumber}
      </div>
    `:""}
    
    ${n.ptNumber?`
      <div class="member-number">
        Ø±Ù‚Ù… PT: ${n.ptNumber}
      </div>
    `:""}
    
    ${n.memberName?`
      <div class="detail-item">
        <strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${n.memberName}
      </div>
    `:""}
    
    ${n.clientName?`
      <div class="detail-item">
        <strong>Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${n.clientName}
      </div>
    `:""}
    
    ${n.name?`
      <div class="detail-item">
        <strong>Ø§Ù„Ø§Ø³Ù…:</strong> ${n.name}
      </div>
    `:""}
    
    ${n.startDate||n.expiryDate?`
      <div class="date-box">
        <p><strong>ğŸ“… ÙØªØ±Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:</strong></p>
        ${n.startDate?`<p>Ù…Ù†: <span class="date-value">${a(n.startDate)}</span></p>`:""}
        ${n.expiryDate?`<p>Ø¥Ù„Ù‰: <span class="date-value">${a(n.expiryDate)}</span></p>`:""}
        ${n.subscriptionDays?`<p>Ø§Ù„Ù…Ø¯Ø©: <span class="date-value">${n.subscriptionDays} ÙŠÙˆÙ…</span></p>`:""}
      </div>
    `:""}
    
    ${d&&(n.newStartDate||n.newExpiryDate)?`
      <div class="renewal-info">
        <p><strong>ğŸ”„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ¬Ø¯ÙŠØ¯:</strong></p>
        ${n.newStartDate?`<p>â€¢ Ù…Ù†: ${a(n.newStartDate)}</p>`:""}
        ${n.newExpiryDate?`<p>â€¢ Ø¥Ù„Ù‰: ${a(n.newExpiryDate)}</p>`:""}
        ${n.subscriptionDays?`<p>â€¢ Ø§Ù„Ù…Ø¯Ø©: ${n.subscriptionDays} ÙŠÙˆÙ…</p>`:""}
      </div>
    `:""}
    
    ${d&&(void 0!==n.oldSessionsRemaining||void 0!==n.newSessionsRemaining)?`
      <div class="renewal-info">
        <p><strong>ğŸ”„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯:</strong></p>
        ${void 0!==n.oldSessionsRemaining?`<p>â€¢ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯: ${n.oldSessionsRemaining}</p>`:""}
        ${void 0!==n.newSessionsRemaining?`<p>â€¢ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¬Ø¯ÙŠØ¯: ${n.newSessionsRemaining}</p>`:""}
      </div>
    `:""}
    
    ${n.subscriptionPrice?`
      <div class="detail-item">
        <strong>Ø³Ø¹Ø± Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ:</strong> ${n.subscriptionPrice} Ø¬Ù†ÙŠÙ‡
      </div>
    `:""}
    
    ${n.sessionsPurchased?`
      <div class="detail-item">
        <strong>Ø¹Ø¯Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª:</strong> ${n.sessionsPurchased}
      </div>
      ${n.pricePerSession?`
        <div class="detail-item">
          <strong>Ø³Ø¹Ø± Ø§Ù„Ø¬Ù„Ø³Ø©:</strong> ${n.pricePerSession} Ø¬Ù†ÙŠÙ‡
        </div>
      `:""}
    `:""}
    
    ${n.coachName?`
      <div class="detail-item">
        <strong>Ø§Ù„Ù…Ø¯Ø±Ø¨:</strong> ${n.coachName}
      </div>
    `:""}
    
    ${n.staffName?`
      <div>
        <strong> Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø³Ø¬Ù„:</strong> ${n.staffName}
      </div>
    `:""}
    
    ${n.serviceType?`
      <div class="detail-item">
        <strong>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> ${"DayUse"===n.serviceType?"ÙŠÙˆÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…":"InBody"}
      </div>
    `:""}
    
    ${void 0!==n.paidAmount?`
      <div class="detail-item">
        <strong>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹:</strong> ${n.paidAmount} Ø¬Ù†ÙŠÙ‡
      </div>
    `:""}
    
    ${n.remainingAmount&&n.remainingAmount>0?`
      <div class="detail-item remaining">
        <strong>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</strong> ${n.remainingAmount} Ø¬Ù†ÙŠÙ‡
      </div>
    `:""}
  </div>

  <div class="total">
    <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
    <span>${r} Ø¬Ù†ÙŠÙ‡</span>
  </div>

  <div class="footer">
    ${d?'<p style="color: #10b981; font-weight: bold;">ØªÙ… ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§ÙƒÙƒ Ø¨Ù†Ø¬Ø§Ø­ \uD83C\uDF89</p>':'<p style="color: #3b82f6; font-weight: bold;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ Ù…Ø¹Ù†Ø§ \uD83C\uDF89</p>'}
    <p style="font-size: 10px; margin-top: 8px;">
      Ù…Ø¯Ø© Ø§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ø£Ø´ØªØ±Ø§Ùƒ 24 Ø³Ø§Ø¹Ù‡
    </p>
  </div>
</body>
</html>
  `}(e),t=window.open("","_blank","width=302,height=600,scrollbars=no");if(!t){alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¥ÙŠØµØ§Ù„");return}t.document.open(),t.document.write(s),t.document.close(),t.onload=function(){setTimeout(()=>{t.focus(),t.print(),t.onafterprint=function(){t.close()},setTimeout(()=>{t.closed||t.close()},1e3)},500)}}({receiptNumber:e,type:s,amount:t,details:l?{...r,paymentMethod:l}:r,date:i})}t.d(s,{p:()=>r})},26939:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\Users\amran\Desktop\gym\gym-management\app\receipts\page.tsx#default`)},57481:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,9206,6621,9797],()=>t(3307));module.exports=a})();