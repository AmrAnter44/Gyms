(()=>{var e={};e.id=1725,e.ids=[1725],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},48811:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),t(31028),t(84658),t(35866);var r=t(23191),a=t(88716),n=t(37922),i=t.n(n),l=t(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=["",{children:["pt",{children:["sessions",{children:["register",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,31028)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\pt\\sessions\\register\\page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,84658)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\pt\\sessions\\register\\page.tsx"],m="/pt/sessions/register/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/pt/sessions/register/page",pathname:"/pt/sessions/register",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22947:(e,s,t)=>{Promise.resolve().then(t.bind(t,92585))},92585:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(10326),a=t(17577),n=t(35047);function i(){let e=(0,n.useRouter)(),[s,t]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(""),[p,u]=(0,a.useState)(""),[x,g]=(0,a.useState)({ptNumber:"",date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),notes:""}),h=async()=>{try{let e=await fetch("/api/pt"),s=await e.json();t(s.filter(e=>e.sessionsRemaining>0))}catch(e){console.error("Error:",e)}finally{l(!1)}},b=async e=>{e.preventDefault(),d(!0),m("");try{let e=`${x.date}T${x.time}:00`,s=await fetch("/api/pt/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ptNumber:parseInt(x.ptNumber),sessionDate:e,notes:x.notes})}),t=await s.json();s.ok?(m("✅ تم تسجيل الحضور بنجاح!"),g({ptNumber:"",date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().slice(0,5),notes:""}),h(),setTimeout(()=>m(""),3e3)):m(`❌ ${t.error||"فشل تسجيل الحضور"}`)}catch(e){console.error(e),m("❌ حدث خطأ في الاتصال")}finally{d(!1)}},j=e=>{g({...x,ptNumber:e.ptNumber.toString()})},N=s.filter(e=>e.clientName.toLowerCase().includes(p.toLowerCase())||e.ptNumber.toString().includes(p)||e.phone.includes(p)),f=s.find(e=>e.ptNumber.toString()===x.ptNumber);return(0,r.jsxs)("div",{className:"container mx-auto p-6",dir:"rtl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"\uD83D\uDCDD تسجيل حضور جلسة PT"}),r.jsx("p",{className:"text-gray-600",children:"سجل حضور العميل في جلسة التدريب الشخصي"})]}),r.jsx("button",{onClick:()=>e.push("/pt/sessions/history"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"\uD83D\uDCCA سجل الحضور"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"جلسات PT المتاحة"}),r.jsx("div",{className:"mb-4",children:r.jsx("input",{type:"text",placeholder:"\uD83D\uDD0D ابحث برقم PT أو الاسم أو الهاتف...",value:p,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border rounded-lg"})}),i?r.jsx("div",{className:"text-center py-8 text-gray-500",children:"جاري التحميل..."}):0===N.length?r.jsx("div",{className:"text-center py-8 text-gray-500",children:p?"لا توجد نتائج للبحث":"لا توجد جلسات متاحة"}):r.jsx("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:N.map(e=>(0,r.jsxs)("div",{onClick:()=>j(e),className:`border rounded-lg p-4 cursor-pointer transition ${x.ptNumber===e.ptNumber.toString()?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-300 hover:bg-gray-50"}`,children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:e.clientName}),r.jsx("p",{className:"text-sm text-gray-600",children:e.phone})]}),(0,r.jsxs)("span",{className:"bg-green-600 text-white px-3 py-1 rounded-full font-bold text-sm",children:["#",e.ptNumber]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-700",children:["المدرب: ",e.coachName]}),(0,r.jsxs)("span",{className:`font-bold ${e.sessionsRemaining<=3?"text-red-600":"text-green-600"}`,children:[e.sessionsRemaining," جلسات متبقية"]})]})]},e.ptNumber))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"بيانات الحضور"}),c&&r.jsx("div",{className:`mb-4 p-4 rounded-lg ${c.includes("✅")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c}),f&&(0,r.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-bold text-lg mb-2",children:"الجلسة المحددة:"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{children:[r.jsx("span",{className:"font-semibold",children:"رقم PT:"})," #",f.ptNumber]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"font-semibold",children:"العميل:"})," ",f.clientName]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"font-semibold",children:"المدرب:"})," ",f.coachName]}),(0,r.jsxs)("p",{children:[r.jsx("span",{className:"font-semibold",children:"الجلسات المتبقية:"}),r.jsx("span",{className:`font-bold mr-2 ${f.sessionsRemaining<=3?"text-red-600":"text-green-600"}`,children:f.sessionsRemaining})]})]})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["رقم PT ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"number",required:!0,value:x.ptNumber,onChange:e=>g({...x,ptNumber:e.target.value}),className:"w-full px-4 py-3 border-2 rounded-lg text-lg font-bold text-green-600",placeholder:"أدخل رقم PT أو اختر من القائمة"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-5",children:[(0,r.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[r.jsx("span",{children:"\uD83D\uDCC5"}),r.jsx("span",{children:"تاريخ ووقت الجلسة"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["التاريخ ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"date",required:!0,value:x.date,onChange:e=>g({...x,date:e.target.value}),className:"w-full px-4 py-3 border-2 rounded-lg font-mono text-lg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["الوقت ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"time",required:!0,value:x.time,onChange:e=>g({...x,time:e.target.value}),className:"w-full px-4 py-3 border-2 rounded-lg font-mono text-lg"})]})]}),(0,r.jsxs)("div",{className:"mt-4 bg-white border-2 border-purple-300 rounded-lg p-3",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"الوقت المحدد:"}),r.jsx("p",{className:"text-lg font-mono font-bold text-purple-700",children:new Date(`${x.date}T${x.time}`).toLocaleString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"ملاحظات (اختياري)"}),r.jsx("textarea",{value:x.notes,onChange:e=>g({...x,notes:e.target.value}),className:"w-full px-4 py-3 border-2 rounded-lg resize-none",rows:3,placeholder:"أضف أي ملاحظات عن الجلسة..."})]}),r.jsx("button",{type:"submit",disabled:o||!x.ptNumber,className:"w-full bg-green-600 text-white py-4 rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-bold text-lg transition",children:o?"⏳ جاري التسجيل...":"✅ تسجيل الحضور"})]})]})]})]})}},31028:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`C:\Users\amran\Desktop\gym\gym-management\app\pt\sessions\register\page.tsx#default`)},57481:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});var r=t(66621);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,9206,6621,9797],()=>t(48811));module.exports=r})();