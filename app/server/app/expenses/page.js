(()=>{var e={};e.id=2299,e.ids=[2299],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},23304:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),t(63029),t(84658),t(35866);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["expenses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,63029)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\expenses\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,84658)),"C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\amran\\Desktop\\gym\\gym-management\\app\\expenses\\page.tsx"],x="/expenses/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/expenses/page",pathname:"/expenses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},4772:(e,s,t)=>{Promise.resolve().then(t.bind(t,43396))},43396:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(10326),r=t(17577);function l(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[d,o]=(0,r.useState)(!0),[c,x]=(0,r.useState)(""),[p,m]=(0,r.useState)("all"),[h,u]=(0,r.useState)({type:"gym_expense",amount:0,description:"",notes:"",staffId:""}),g=async()=>{try{let e=await fetch("/api/expenses"),t=await e.json();s(t)}catch(e){console.error("Error:",e)}finally{o(!1)}},y=async e=>{e.preventDefault(),o(!0),x("");try{(await fetch("/api/expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok?(u({type:"gym_expense",amount:0,description:"",notes:"",staffId:""}),x("✅ تم إضافة المصروف بنجاح!"),setTimeout(()=>x(""),3e3),g(),i(!1)):x("❌ فشل إضافة المصروف")}catch(e){console.error(e),x("❌ حدث خطأ")}finally{o(!1)}},j=async e=>{if(confirm("هل أنت متأكد من الحذف؟"))try{await fetch(`/api/expenses?id=${e}`,{method:"DELETE"}),g()}catch(e){console.error("Error:",e)}},f=async e=>{try{await fetch("/api/expenses",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,isPaid:!e.isPaid})}),g()}catch(e){console.error("Error:",e)}},b="all"===p?e:e.filter(e=>e.type===p),v=e=>"gym_expense"===e?"مصروف جيم":"سلفة موظف",N=e=>"gym_expense"===e?"bg-orange-100 text-orange-800":"bg-purple-100 text-purple-800";return(0,a.jsxs)("div",{className:"container mx-auto p-6",dir:"rtl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"\uD83D\uDCB8 المصروفات"}),a.jsx("p",{className:"text-gray-600",children:"إدارة مصروفات الجيم وسلف الموظفين"})]}),a.jsx("button",{onClick:()=>i(!n),className:"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700",children:n?"إخفاء النموذج":"➕ إضافة مصروف جديد"})]}),c&&a.jsx("div",{className:`mb-6 p-4 rounded-lg ${c.includes("✅")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"إجمالي المصروفات"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-orange-600",children:[b.reduce((e,s)=>e+s.amount,0)," ج.م"]})]}),a.jsx("div",{className:"text-4xl",children:"\uD83D\uDCB8"})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"مصروفات الجيم"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-orange-600",children:[e.filter(e=>"gym_expense"===e.type).reduce((e,s)=>e+s.amount,0)," ج.م"]})]}),a.jsx("div",{className:"text-4xl",children:"\uD83D\uDD27"})]})}),a.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"سلف الموظفين"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[e.filter(e=>"staff_loan"===e.type).reduce((e,s)=>e+s.amount,0)," ج.م"]})]}),a.jsx("div",{className:"text-4xl",children:"\uD83D\uDCB5"})]})})]}),n&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"إضافة مصروف جديد"}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"نوع المصروف *"}),(0,a.jsxs)("select",{value:h.type,onChange:e=>u({...h,type:e.target.value,staffId:""}),className:"w-full px-3 py-2 border rounded-lg",required:!0,children:[a.jsx("option",{value:"gym_expense",children:"مصروف جيم"}),a.jsx("option",{value:"staff_loan",children:"سلفة موظف"})]})]}),"staff_loan"===h.type&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"الموظف *"}),(0,a.jsxs)("select",{value:h.staffId,onChange:e=>u({...h,staffId:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",required:!0,children:[a.jsx("option",{value:"",children:"اختر الموظف"}),t.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"المبلغ *"}),a.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:h.amount,onChange:e=>u({...h,amount:parseFloat(e.target.value)||0}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"0.00"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"الوصف *"}),a.jsx("input",{type:"text",required:!0,value:h.description,onChange:e=>u({...h,description:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"وصف المصروف"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:"ملاحظات"}),a.jsx("textarea",{value:h.notes,onChange:e=>u({...h,notes:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",rows:3,placeholder:"ملاحظات إضافية..."})]}),a.jsx("button",{type:"submit",disabled:d,className:"w-full bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 disabled:bg-gray-400",children:d?"جاري الحفظ...":"إضافة مصروف"})]})]}),a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"px-4 py-2 border rounded-lg",children:[a.jsx("option",{value:"all",children:"جميع المصروفات"}),a.jsx("option",{value:"gym_expense",children:"مصروفات الجيم"}),a.jsx("option",{value:"staff_loan",children:"سلف الموظفين"})]})}),d?a.jsx("div",{className:"text-center py-12",children:"جاري التحميل..."}):(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-100",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-right",children:"النوع"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"الموظف"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"الوصف"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"المبلغ"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"الحالة"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"التاريخ"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"إجراءات"})]})}),a.jsx("tbody",{children:b.map(e=>(0,a.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`px-3 py-1 rounded text-sm ${N(e.type)}`,children:v(e.type)})}),a.jsx("td",{className:"px-4 py-3",children:e.staff?e.staff.name:"-"}),a.jsx("td",{className:"px-4 py-3",children:e.description}),(0,a.jsxs)("td",{className:"px-4 py-3 font-bold text-orange-600",children:[e.amount," ج.م"]}),a.jsx("td",{className:"px-4 py-3",children:"staff_loan"===e.type&&a.jsx("button",{onClick:()=>f(e),className:`px-3 py-1 rounded text-sm ${e.isPaid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isPaid?"✅ مدفوعة":"❌ غير مدفوعة"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(e.createdAt).toLocaleDateString("ar-EG")}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-800",children:"حذف"})})]},e.id))})]}),0===b.length&&a.jsx("div",{className:"text-center py-12 text-gray-500",children:"لا توجد مصروفات حالياً"})]})]})}},63029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`C:\Users\amran\Desktop\gym\gym-management\app\expenses\page.tsx#default`)},57481:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[8948,9206,6621,9797],()=>t(23304));module.exports=a})();